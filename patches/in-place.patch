diff -ur ./CRM/Contact/BAO/Query.php /var/www/citybibleforum/sites/all/modules/civicrm/CRM/Contact/BAO/Query.php
--- ./CRM/Contact/BAO/Query.php	2015-03-06 14:16:37.000000000 +1100
+++ /var/www/citybibleforum/sites/all/modules/civicrm/CRM/Contact/BAO/Query.php	2015-03-07 20:30:47.957552174 +1100
@@ -2539,16 +2539,16 @@
             }
             else {
               $from .= " $side JOIN civicrm_relationship ON (civicrm_relationship.contact_id_b = contact_a.id OR civicrm_relationship.contact_id_a = contact_a.id)";
-              $from .= " $side JOIN civicrm_contact contact_b ON (civicrm_relationship.contact_id_a = contact_b.id OR civicrm_relationship.contact_id_b = contact_b.id)";
+              $from .= " $side JOIN civicrm_contact contact_b ON ((civicrm_relationship.contact_id_a = contact_b.id OR civicrm_relationship.contact_id_b = contact_b.id) AND contact_b.is_deleted = 0)";
             }
           }
           elseif (self::$_relType == 'b') {
             $from .= " $side JOIN civicrm_relationship ON (civicrm_relationship.contact_id_b = contact_a.id )";
-            $from .= " $side JOIN civicrm_contact contact_b ON (civicrm_relationship.contact_id_a = contact_b.id )";
+            $from .= " $side JOIN civicrm_contact contact_b ON (civicrm_relationship.contact_id_a = contact_b.id AND contact_b.is_deleted = 0)";
           }
           else {
             $from .= " $side JOIN civicrm_relationship ON (civicrm_relationship.contact_id_a = contact_a.id )";
-            $from .= " $side JOIN civicrm_contact contact_b ON (civicrm_relationship.contact_id_b = contact_b.id )";
+            $from .= " $side JOIN civicrm_contact contact_b ON (civicrm_relationship.contact_id_b = contact_b.id AND contact_b.is_deleted = 0)";
           }
           continue;
 
diff -ur ./CRM/Contribute/xml/Menu/Contribute.xml /var/www/citybibleforum/sites/all/modules/civicrm/CRM/Contribute/xml/Menu/Contribute.xml
--- ./CRM/Contribute/xml/Menu/Contribute.xml	2015-03-06 14:16:37.000000000 +1100
+++ /var/www/citybibleforum/sites/all/modules/civicrm/CRM/Contribute/xml/Menu/Contribute.xml	2015-03-07 20:30:47.977552526 +1100
@@ -229,6 +229,8 @@
     <title>Cancel Subscription</title>
     <page_callback>CRM_Contribute_Form_CancelSubscription</page_callback>
     <access_arguments>make online contributions</access_arguments>
+    <is_ssl>true</is_ssl>
+    <is_public>true</is_public>
   </item>
   <item>
     <path>civicrm/contribute/onbehalf</path>
@@ -246,6 +248,8 @@
     <title>Update Subscription</title>
     <page_callback>CRM_Contribute_Form_UpdateSubscription</page_callback>
     <access_arguments>make online contributions</access_arguments>
+    <is_ssl>true</is_ssl>
+    <is_public>true</is_public>
   </item>
   <item>
     <path>civicrm/contribute/subscriptionstatus</path>
diff -ur ./css/civicrm.css /var/www/citybibleforum/sites/all/modules/civicrm/css/civicrm.css
--- ./css/civicrm.css	2015-03-06 14:16:38.000000000 +1100
+++ /var/www/citybibleforum/sites/all/modules/civicrm/css/civicrm.css	2015-03-07 20:30:48.005553019 +1100
@@ -299,6 +299,14 @@
   height: 5px;
 }
 
+/* 
+ * A fix to prevent the CBF theme making input fields 90% of the form width
+ */
+#crm-container form input.form-text, 
+#crm-container form textarea.form-textarea {
+    width: auto;
+}
+
 .crm-container td.compressed select,
 .crm-container td.compressed input {
   font-size: 0.90em;
@@ -3870,6 +3878,11 @@
 #crm-container .crm-fb-tweet-buttons {
   width: 93%;
 }
+#crm-container .crm-fb-tweet-buttons .label {
+  width:  64px;
+  height: 30px;
+}
+
 #crm-container div.finalconf-button {
   float: right;
   padding: 5px 0 0 0;
diff -ur ./packages/HTML/QuickForm/ckeditor.php /var/www/citybibleforum/sites/all/modules/civicrm/packages/HTML/QuickForm/ckeditor.php
--- ./packages/HTML/QuickForm/ckeditor.php	2015-03-06 14:16:57.000000000 +1100
+++ /var/www/citybibleforum/sites/all/modules/civicrm/packages/HTML/QuickForm/ckeditor.php	2015-03-07 20:31:38.322438840 +1100
@@ -74,19 +74,54 @@
                         CKEDITOR.remove(CKEDITOR.instances['{$elementId}']);
                     }
                     if ( cj('#{$elementId}').val( ) == '' ) cj('#{$elementId}').val('&nbsp;');
-                    CKEDITOR.replace( '{$elementId}' );
+                    CKEDITOR.replace( '{$elementId}',
+                    {
+                       scayt_autoStartup :         true,
+                       scayt_sLang       :         'en_GB',
+                       forcePasteAsPlainText :     true,
+                       toolbar : [
+                          ['Source'],
+                          ['Cut','Copy','PasteText','-','SpellChecker', 'Scayt'],
+                          ['Undo','Redo','Find','Replace','-','SelectAll','RemoveFormat'],
+                          ['Image','Table','HorizontalRule','SpecialChar'],
+                          '/',
+                          ['Bold','Italic','Underline','Strike','-','Subscript','Superscript'],
+                          ['NumberedList','BulletedList','-','Outdent','Indent','Blockquote'],
+                          ['JustifyLeft','JustifyCenter','JustifyRight','JustifyBlock'],
+                          ['Link','Unlink','Anchor','Linkit','LinkToNode', 'LinkToMenu'],
+                          '/',
+                          ['TextColor','BGColor'],
+                          ['Maximize', 'ShowBlocks']
+                       ],
+                    } );
                     var editor = CKEDITOR.instances['{$elementId}'];
                     if ( editor ) {
                         editor.config.width              = '".$this->width."';
                         editor.config.height             = '".$this->height."';
-                        editor.config.filebrowserBrowseUrl      = '".$browseUrl."?cms=civicrm&type=files';
-                        editor.config.filebrowserImageBrowseUrl = '".$browseUrl."?cms=civicrm&type=images';
-                        editor.config.filebrowserFlashBrowseUrl = '".$browseUrl."?cms=civicrm&type=flash';
-                        editor.config.filebrowserUploadUrl      = '".$uploadUrl."?cms=civicrm&type=files';
-                        editor.config.filebrowserImageUploadUrl = '".$uploadUrl."?cms=civicrm&type=images';
-                        editor.config.filebrowserFlashUploadUrl = '".$uploadUrl."?cms=civicrm&type=flash';
+                        editor.config.filebrowserBrowseUrl      = '/imce?app=ckeditor|sendto%40ckeditor_imceSendTo_{$elementId}|';
+                        editor.config.filebrowserImageBrowseUrl = '/imce?app=ckeditor|sendto%40ckeditor_imceSendTo_{$elementId}|';
+                        editor.config.filebrowserFlashBrowseUrl = '/imce?app=ckeditor|sendto%40ckeditor_imceSendTo_{$elementId}|';
+                        editor.config.filebrowserUploadUrl      = '';
+                        editor.config.filebrowserImageUploadUrl = '';
+                        editor.config.filebrowserFlashUploadUrl = '';
+                        editor.config.bodyClass                 = 'cke_editable';
+                        editor.config.contentsCss               = '/sites/all/themes/cbootf/css/editor.css';
                     }
                 });
+                /**
+                 * IMCE support
+                 */
+                var ckeditor_imceSendTo_{$elementId} = function (file, win){
+                    var cfunc = win.location.href.split('&');
+                    for (var x in cfunc) {
+                        if (cfunc[x].match(/^CKEditorFuncNum=\d+$/)) {
+                            cfunc = cfunc[x].split('=');
+                            break;
+                        }
+                    }
+                    CKEDITOR.tools.callFunction(cfunc[1], file.url);
+                    win.close();
+                }
             </script>";
             return $html;
         }
@@ -107,17 +142,38 @@
                       CKEDITOR.remove(CKEDITOR.instances['{$elementId}']);
                   }
                   if ( $('#{$elementId}').val( ) == '' ) $('#{$elementId}').val('&nbsp;');
-                  CKEDITOR.replace( '{$elementId}' );
+                  CKEDITOR.replace( '{$elementId}',
+                  {
+                     scayt_autoStartup :         true,
+                     scayt_sLang       :         'en_GB',
+                     forcePasteAsPlainText :     true,
+                     toolbar : [
+                        ['Source'],
+                        ['Cut','Copy','PasteText','-','SpellChecker', 'Scayt'],
+                        ['Undo','Redo','Find','Replace','-','SelectAll','RemoveFormat'],
+                        ['Image','Table','HorizontalRule','SpecialChar'],
+                        '/',
+                        ['Bold','Italic','Underline','Strike','-','Subscript','Superscript'],
+                        ['NumberedList','BulletedList','-','Outdent','Indent','Blockquote'],
+                        ['JustifyLeft','JustifyCenter','JustifyRight','JustifyBlock'],
+                        ['Link','Unlink','Anchor','Linkit','LinkToNode', 'LinkToMenu'],
+                        '/',
+                        ['TextColor','BGColor'],
+                        ['Maximize', 'ShowBlocks']
+                     ],
+                  } );
                   var editor = CKEDITOR.instances['{$elementId}'];
                   if ( editor ) {
                       editor.config.width              = '".$this->width."';
                       editor.config.height             = '".$this->height."';
-                      editor.config.filebrowserBrowseUrl      = '".$browseUrl."?cms=civicrm&type=files';
-                      editor.config.filebrowserImageBrowseUrl = '".$browseUrl."?cms=civicrm&type=images';
-                      editor.config.filebrowserFlashBrowseUrl = '".$browseUrl."?cms=civicrm&type=flash';
-                      editor.config.filebrowserUploadUrl      = '".$uploadUrl."?cms=civicrm&type=files';
-                      editor.config.filebrowserImageUploadUrl = '".$uploadUrl."?cms=civicrm&type=images';
-                      editor.config.filebrowserFlashUploadUrl = '".$uploadUrl."?cms=civicrm&type=flash';
+                      editor.config.filebrowserBrowseUrl      = '/imce?app=ckeditor|sendto%40ckeditor_imceSendTo_{$elementId}|';
+                      editor.config.filebrowserImageBrowseUrl = '/imce?app=ckeditor|sendto%40ckeditor_imceSendTo_{$elementId}|';
+                      editor.config.filebrowserFlashBrowseUrl = '/imce?app=ckeditor|sendto%40ckeditor_imceSendTo_{$elementId}|';
+                      editor.config.filebrowserUploadUrl      = '';
+                      editor.config.filebrowserImageUploadUrl = '';
+                      editor.config.filebrowserFlashUploadUrl = '';
+                      editor.config.bodyClass                 = 'cke_editable';
+                      editor.config.contentsCss               = '/sites/all/themes/cbootf/css/editor.css';
                       editor.on( 'blur', function( e ) {
                         this.updateElement();
                         this.destroy(true);
@@ -130,7 +186,21 @@
                 $('#{$elementId}-plain').click(openWysiwyg);
                 $('#{$elementId}-plain').keypress(openWysiwyg);
               });
-          </script>";
+              /**
+               * IMCE support
+               */
+              var ckeditor_imceSendTo_{$elementId} = function (file, win){
+                  var cfunc = win.location.href.split('&');
+                  for (var x in cfunc) {
+                      if (cfunc[x].match(/^CKEditorFuncNum=\d+$/)) {
+                          cfunc = cfunc[x].split('=');
+                          break;
+                      }
+                  }
+                  CKEDITOR.tools.callFunction(cfunc[1], file.url);
+                  win.close();
+              }
+            </script>";
           return $html;
         }
     }
diff -ur ./packages/HTML/QuickForm/tinymce.php /var/www/citybibleforum/sites/all/modules/civicrm/packages/HTML/QuickForm/tinymce.php
--- ./packages/HTML/QuickForm/tinymce.php	2015-03-06 14:16:57.000000000 +1100
+++ /var/www/citybibleforum/sites/all/modules/civicrm/packages/HTML/QuickForm/tinymce.php	2015-03-07 20:31:38.322438840 +1100
@@ -160,7 +160,7 @@
         theme_advanced_buttons1_add: "separator,forecolor,backcolor,separator,link,unlink,separator,image,hr,emotions",
         theme_advanced_buttons2    : "separator,numlist,bullist,|,outdent,indent,cite,separator,justifyleft,justifycenter,justifyright",
         theme_advanced_buttons2_add: "justifyfull,separator,pastetext,pasteword,|,spellchecker,separator,removeformat,separator,|,undo,redo,|,code,|,fullscreen,help",
-        theme_advanced_buttons3    : "",
+        theme_advanced_buttons3    : "tablecontrols",
         theme_advanced_toolbar_location : "top",
         theme_advanced_toolbar_align : "left",
         theme_advanced_statusbar_location : "bottom",
diff -ur ./packages/Net/SMTP.php /var/www/citybibleforum/sites/all/modules/civicrm/packages/Net/SMTP.php
--- ./packages/Net/SMTP.php	2015-03-06 14:16:57.000000000 +1100
+++ /var/www/citybibleforum/sites/all/modules/civicrm/packages/Net/SMTP.php	2015-03-07 20:31:38.342439192 +1100
@@ -601,8 +601,6 @@
          * (SSL) socket connection. */
         if ($tls && version_compare(PHP_VERSION, '5.1.0', '>=') &&
             extension_loaded('openssl') && isset($this->_esmtp['STARTTLS']) &&
-            // CiviCRM: CRM-8744
-            ($this->_esmtp['STARTTLS'] == true) &&
             strncasecmp($this->host, 'ssl://', 6) !== 0) {
             /* Start the TLS connection attempt. */
             if (PEAR::isError($result = $this->_put('STARTTLS'))) {
